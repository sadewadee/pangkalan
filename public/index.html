<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pangkalan Gas - Data Pelanggan</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style>
        /* Force mobile viewport */
        @-ms-viewport { width: device-width; }
        @viewport { width: device-width; }
        @-o-viewport { width: device-width; }
        * {
            -webkit-tap-highlight-color: transparent;
        }
        .pelanggan-card {
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
        }
        .toggle-switch input:focus {
            outline: 2px solid #2196F3;
        }
    </style>
</head>
<body>
    <svg aria-hidden="true" focusable="false" style="position:absolute;width:0;height:0;overflow:hidden;">
        <symbol id="icon-store" viewBox="0 0 24 24">
            <polygon points="3,9 6,3 18,3 21,9" fill="currentColor"></polygon>
            <rect x="4" y="9" width="16" height="12" rx="2" ry="2" fill="currentColor" opacity="0.85"></rect>
            <rect x="9" y="12" width="6" height="9" fill="currentColor" opacity="0.6"></rect>
        </symbol>
        <symbol id="icon-clipboard" viewBox="0 0 24 24">
            <rect x="5" y="4" width="14" height="18" rx="2" ry="2" fill="currentColor" opacity="0.2"></rect>
            <rect x="9" y="2" width="6" height="4" rx="1" ry="1" fill="currentColor"></rect>
            <rect x="8" y="9" width="8" height="1.5" fill="currentColor" opacity="0.8"></rect>
            <rect x="8" y="13" width="8" height="1.5" fill="currentColor" opacity="0.8"></rect>
        </symbol>
        <symbol id="icon-search" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" fill="none"></circle>
            <line x1="16" y1="16" x2="22" y2="22" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        </symbol>
        <symbol id="icon-plus" viewBox="0 0 24 24">
            <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
            <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        </symbol>
        <symbol id="icon-mailbox" viewBox="0 0 24 24">
            <rect x="3" y="8" width="18" height="12" rx="2" ry="2" fill="currentColor" opacity="0.85"></rect>
            <polyline points="3,9 12,15 21,9" fill="none" stroke="currentColor" stroke-width="2"></polyline>
        </symbol>
        <symbol id="icon-note" viewBox="0 0 24 24">
            <rect x="4" y="3" width="16" height="18" rx="2" ry="2" fill="currentColor" opacity="0.15"></rect>
            <rect x="7" y="6" width="10" height="2" fill="currentColor"></rect>
            <rect x="7" y="10" width="10" height="2" fill="currentColor"></rect>
            <rect x="7" y="14" width="7" height="2" fill="currentColor"></rect>
        </symbol>
        <symbol id="icon-user" viewBox="0 0 24 24">
            <circle cx="12" cy="8" r="4" fill="currentColor"></circle>
            <path d="M4 21c0-4 4-7 8-7s8 3 8 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
        </symbol>
        <symbol id="icon-id" viewBox="0 0 24 24">
            <rect x="3" y="6" width="18" height="12" rx="2" ry="2" fill="currentColor" opacity="0.1"></rect>
            <circle cx="8.5" cy="12" r="2" fill="currentColor"></circle>
            <path d="M5 16c0-2 2-3 3.5-3S12 14 12 16" fill="none" stroke="currentColor" stroke-width="1.5"></path>
            <rect x="13" y="10" width="6" height="1.5" fill="currentColor"></rect>
            <rect x="13" y="13" width="4" height="1.5" fill="currentColor"></rect>
        </symbol>
        <symbol id="icon-hint" viewBox="0 0 24 24">
            <path d="M12 3a6 6 0 0 1 6 6c0 2.1-1.1 4-2.8 5.1-.5.3-.7.9-.7 1.4v1.5H9.5v-1.5c0-.6-.3-1.1-.8-1.4A6 6 0 0 1 6 9a6 6 0 0 1 6-6z" fill="currentColor" opacity="0.4"></path>
            <rect x="10" y="18" width="4" height="2" rx="1" ry="1" fill="currentColor"></rect>
            <rect x="9" y="21" width="6" height="1.5" rx="0.75" ry="0.75" fill="currentColor"></rect>
        </symbol>
        <symbol id="icon-home" viewBox="0 0 24 24">
            <path d="M4 11l8-7 8 7v9a2 2 0 0 1-2 2h-4v-6H10v6H6a2 2 0 0 1-2-2z" fill="currentColor"></path>
        </symbol>
        <symbol id="icon-check" viewBox="0 0 24 24">
            <polyline points="4 12 10 18 20 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
        </symbol>
        <symbol id="icon-edit" viewBox="0 0 24 24">
            <path d="M4 17.25V21h3.75L18.81 9.94l-3.75-3.75L4 17.25z" fill="currentColor"></path>
            <path d="M20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="currentColor"></path>
        </symbol>
        <symbol id="icon-trash" viewBox="0 0 24 24">
            <path d="M6 7h12l-1 13H7L6 7z" fill="currentColor" opacity="0.85"></path>
            <rect x="9" y="3" width="6" height="2" fill="currentColor"></rect>
            <rect x="5" y="5" width="14" height="2" fill="currentColor"></rect>
        </symbol>
        <symbol id="icon-copy" viewBox="0 0 24 24">
            <rect x="8" y="8" width="12" height="14" rx="2" ry="2" fill="currentColor" opacity="0.3"></rect>
            <rect x="4" y="4" width="12" height="14" rx="2" ry="2" fill="currentColor"></rect>
        </symbol>
    </svg>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo" aria-hidden="true">
                        <svg class="icon icon-store"><use href="#icon-store"></use></svg>
                    </div>
                    <div>
                        <h1>PANGKALAN GAS</h1>
                        <p class="subtitle">
                            <svg class="icon icon-clipboard"><use href="#icon-clipboard"></use></svg>
                            Data Pelanggan
                        </p>
                    </div>
                </div>
                <div class="total-count">
                    <span class="total-label">Total</span>
                    <span class="total-number" id="totalCount">0</span>
                </div>
            </div>
        </header>

        <!-- Search Section -->
        <div class="search-section">
            <div class="search-box">
                <span class="search-icon" aria-hidden="true">
                    <svg class="icon icon-search"><use href="#icon-search"></use></svg>
                </span>
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Cari nama atau NIK pelanggan..."
                    autocomplete="off"
                >
            </div>
        </div>

        <!-- Add Customer Button -->
        <div class="add-section">
            <button class="add-btn" id="addBtn">
                <span class="add-icon" aria-hidden="true">
                    <svg class="icon icon-plus"><use href="#icon-plus"></use></svg>
                </span>
                TAMBAH PELANGGAN BARU
            </button>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Sedang memuat data...</p>
        </div>

        <!-- Pelanggan List -->
        <div class="pelanggan-list" id="pelangganList"></div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState">
            <div class="empty-icon" aria-hidden="true">
                <svg class="icon icon-mailbox"><use href="#icon-mailbox"></use></svg>
            </div>
            <h2>Belum Ada Data Pelanggan</h2>
            <p>Klik tombol "TAMBAH PELANGGAN BARU" untuk mulai mencatat data</p>
            <button class="add-btn" onclick="showAddModal()">
                <span class="add-icon" aria-hidden="true">
                    <svg class="icon icon-plus"><use href="#icon-plus"></use></svg>
                </span>
                TAMBAH PELANGGAN
            </button>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-container">
        <button class="floating-add-btn" id="floatingAddBtn" onclick="showAddModal()">
            <svg class="icon icon-plus" aria-hidden="true"><use href="#icon-plus"></use></svg>
            <span class="sr-only">Tambah pelanggan baru</span>
        </button>
    </div>

    <!-- Modal Add/Edit -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">
                    <svg class="icon icon-note" aria-hidden="true"><use href="#icon-note"></use></svg>
                    <span id="modalTitleText">Tambah Pelanggan Baru</span>
                </h2>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            
            <form id="pelangganForm">
                <input type="hidden" id="pelangganId">
                
                <div class="form-group">
                    <label for="namaPelanggan">
                        <svg class="icon icon-user" aria-hidden="true"><use href="#icon-user"></use></svg>
                        Nama Lengkap
                    </label>
                    <input 
                        type="text" 
                        id="namaPelanggan" 
                        placeholder="Masukkan nama lengkap pelanggan"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="nikPelanggan">
                        <svg class="icon icon-id" aria-hidden="true"><use href="#icon-id"></use></svg>
                        Nomor NIK (16 digit)
                    </label>
                    <input 
                        type="text" 
                        id="nikPelanggan" 
                        placeholder="Masukkan 16 digit NIK"
                        maxlength="16"
                        pattern="[0-9]{16}"
                        required
                    >
                    <div class="form-hint">
                        <svg class="icon icon-hint" aria-hidden="true"><use href="#icon-hint"></use></svg>
                        <span>NIK wajib 16 digit angka</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="domisiliPelanggan">
                        <svg class="icon icon-home" aria-hidden="true"><use href="#icon-home"></use></svg>
                        Domisili/Alamat
                    </label>
                    <input 
                        type="text" 
                        id="domisiliPelanggan" 
                        placeholder="Masukkan alamat domisili"
                        required
                    >
                    <div class="form-hint">
                        <svg class="icon icon-hint" aria-hidden="true"><use href="#icon-hint"></use></svg>
                        <span>Contoh: Jakarta Pusat, RT.01/RW.02</span>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal()">
                        BATAL
                    </button>
                    <button type="submit" class="btn-primary">
                        <svg class="icon icon-check" aria-hidden="true"><use href="#icon-check"></use></svg>
                        SIMPAN
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success/Error Messages -->
    <div class="message-box" id="messageBox"></div>

    <script src="app.js"></script>
</body>
</html>
